<!-- event-display-source.component.html -->
<div class="container mt-3">
  <h2 class="card-title">Configure geometry pipeline</h2>

  <img src="assets/diagrams/geometry-pipeline.svg" alt="geometry-pipeline">

  <form >

  <div class="card mt-4">
    <div class="card-body">
      <h4 class="card-title">Data Sources</h4>

      <div class="form-group">
        <div class="mt-4">
          <h5>Geometry</h5>
          Select file with the geometry
          <div class="mt-4">
            <firebird-resource-select #geometrySelect [options]="geometryOptions" label="Geometry source" class="full-width-field"></firebird-resource-select>
          </div>
        </div>
      </div>



      <h5>Trajectories Source</h5>
      <div class="form-group">
        <select class="form-control" [formControl]="selectedEventSource">
          <option value="no-events">No events (may upload later)</option>
          <option value="https://firebird-eic.org/dirc_event.json.zip">DIRC optical (load DIRC only geometry)</option>
          <option value="https://firebird-eic.org/py8_dis-cc_10x100_minq2-1000_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-cc_10x100_minq2-1000_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-cc_18x275_minq2-1000_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-cc_18x275_minq2-1000_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-cc_18x275_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-cc_18x275_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-cc_5x41_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-cc_5x41_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-cc_all_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-cc_all_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-nc_10x100_minq2-1000_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-nc_10x100_minq2-1000_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-nc_10x100_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-nc_10x100_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-nc_10x100_minq2-1_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-nc_10x100_minq2-1_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-nc_18x275_minq2-1000_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-nc_18x275_minq2-1000_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-nc_18x275_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-nc_18x275_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-nc_18x275_minq2-1_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-nc_18x275_minq2-1_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-nc_5x41_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-nc_5x41_minq2-100_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
          <option value="https://firebird-eic.org/py8_dis-nc_all_minq2-1_minp-300mev_vtxcut-5m_nevt-5.evt.zip">py8_dis-nc_all_minq2-1_minp-300mev_vtxcut-5m_nevt-5.evt.zip</option>
        </select>
      </div>

      <div class="form-group">
        <div class="mt-4">
          <h5>EDM4EIC events</h5>
          Select file with EDM4EIC data
          <div class="mt-4">
            <firebird-resource-select #edm4eicSelect [options]="edm4eicOptions" label="EDM4EIC file" class="full-width-field"></firebird-resource-select>
          </div>
        </div>
      </div>


    </div>
  </div>

    <div class="card mt-4">
      <div class="card-body">
        <h5 class="card-title">ROOT Geometry optimization</h5>
        <div class="mt-4">
          <h6>Leave only central detector (Remove Beamline, Far Froward and Backward)</h6>
          <div class="form-check custom-control custom-switch">
            <input class="custom-control-input" type="checkbox" id="geoPostEnabled" [formControl]="onlyCentralDetector">
            <label class="custom-control-label" for="geoPostEnabled">Enabled</label>
          </div>
        </div>
        <div class="mt-4">
          <h6>Optimize detectors (remove parts such as glue, pixels, some layers, etc)</h6>
          <div class="form-check custom-control custom-switch">
            <input class="custom-control-input" type="checkbox" checked="checked" disabled>
            <label class="custom-control-label" for="geoPostEnabled">Enabled</label>
          </div>
        </div>
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-body">
        <h5 class="card-title">WebGL Geometry optimization</h5>
        <div class="mt-4">
          <h6>Merge geometries if possible</h6>
          Merging geometries allows to significantly improve the performance by reducing the number of
          <a href="https://discourse.threejs.org/t/webgl-drawcalls/24476">drawcalls</a>.
          <div class="form-check custom-control custom-switch">
            <input class="custom-control-input" type="checkbox" checked="checked" disabled>
            <label class="custom-control-label" for="geoPostEnabled">Enabled</label>
          </div>
        </div>
      </div>
    </div>

    <!-- USE LOCAL API -->
    <div class="card mt-4">
      <div class="card-body">
        <h5 class="card-title">Server API Configuration</h5>
        <div class="form-check custom-control custom-switch mt-4">
          <input class="custom-control-input" type="checkbox" id="serverUseApiCheckbox" [formControl]="serverUseApi">
          <label class="custom-control-label" for="serverUseApiCheckbox">Use local backend</label>
        </div>
        <div class="form-row align-items-center">
          <div class="col-auto">
            <h6 class="mb-0">API Host:</h6>
          </div>
          <div class="col">
            <input class="form-control" type="text" placeholder="Enter API host" [formControl]="serverApiHost" [disabled]="!serverUseApi.value">
          </div>
          <div class="col-auto">
            <h6 class="mb-0">API Port:</h6>
          </div>
          <div class="col">
            <input class="form-control" type="text" placeholder="Enter API port" [formControl]="serverApiPort" [disabled]="!serverUseApi.value">
          </div>
        </div>
      </div>
    </div>


    <!--    <div class="card mt-4">-->
<!--      <div class="card-body">-->
<!--        <h5 class="card-title">Rendering</h5>-->
<!--        <div class="mt-4">-->
<!--          <h6>Debug menu</h6>-->
<!--          <a href="https://discourse.threejs.org/t/webgl-drawcalls/24476">drawcalls</a> significantly improving the performance.-->
<!--          <div class="form-check custom-control custom-switch">-->
<!--            <input class="custom-control-input" type="checkbox" checked="checked" disabled>-->
<!--            <label class="custom-control-label" for="geoPostEnabled">Enabled</label>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

    <div class="mt-4 text-center">
      <button type="button" class="btn btn-lg btn-primary" [routerLink]="['/display']">DISPLAY</button>
    </div>

  </form>
</div>
